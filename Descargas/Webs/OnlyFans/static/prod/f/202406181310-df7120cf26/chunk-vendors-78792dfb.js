"use strict";(self.webpackChunkof_vue=self.webpackChunkof_vue||[]).push([[23358],{491246:function(t,e,n){n.d(e,{Z:function(){return h},k:function(){return u}});var s=n(268411),r=n(260831);const o="7";function i(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function a(t){return`${i(t)}${t.projectId}/envelope/`}function c(t,e){return(0,s.u4)({sentry_key:t.publicKey,sentry_version:o,...e&&{sentry_client:`${e.name}/${e.version}`}})}function h(t,e={}){const n="string"==typeof e?e:e.tunnel,s="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return n||`${a(t)}?${c(t,s)}`}function u(t,e){const n=(0,r.AD)(t);if(!n)return"";const s=`${i(n)}embed/error-page/`;let o=`dsn=${(0,r.SB)(n)}`;for(const r in e)if("dsn"!==r&&"onClose"!==r)if("user"===r){const t=e.user;if(!t)continue;t.name&&(o+=`&name=${encodeURIComponent(t.name)}`),t.email&&(o+=`&email=${encodeURIComponent(t.email)}`)}else o+=`&${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`;return`${s}?${o}`}},376482:function(t,e,n){n.d(e,{S:function(){return k},V:function(){return b}});var s=n(260831),r=n(317412),o=n(306936),i=n(973816),a=n(560690),c=n(728880),h=n(897492),u=n(491246),d=n(292220),p=n(371392),l=n(483741),_=n(586641),g=n(65836),v=n(142502),f=n(407058),m=n(475452),E=n(249475);const $="Not capturing exception because it's already been captured.";class b{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=(0,s.AD)(t.dsn):d.T&&r.vF.warn("No DSN provided, client will not send events."),this._dsn){const e=(0,u.Z)(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}}captureException(t,e,n){if((0,o.GR)(t))return void(d.T&&r.vF.log($));let s=e&&e.event_id;return this._process(this.eventFromException(t,e).then((t=>this._captureEvent(t,e,n))).then((t=>{s=t}))),s}captureMessage(t,e,n,s){let r=n&&n.event_id;const o=(0,i.NF)(t)?t:String(t),a=(0,i.sO)(t)?this.eventFromMessage(o,e,n):this.eventFromException(t,n);return this._process(a.then((t=>this._captureEvent(t,n,s))).then((t=>{r=t}))),r}captureEvent(t,e,n){if(e&&e.originalException&&(0,o.GR)(e.originalException))return void(d.T&&r.vF.log($));let s=e&&e.event_id;const i=undefined,a=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,e,a||n).then((t=>{s=t}))),s}captureSession(t){"string"!=typeof t.release?d.T&&r.vF.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),(0,f.qO)(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then((n=>e.flush(t).then((t=>n&&t))))):(0,a.XW)(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),t)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return d.T&&r.vF.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const e=this._integrations[t.name];(0,g.qm)(this,t,this._integrations),e||(0,g.lc)(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=(0,p.V)(t,this._dsn,this._options._metadata,this._options.tunnel);for(const r of e.attachments||[])n=(0,c.W3)(n,(0,c.bm)(r,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(n);s&&s.then((e=>this.emit("afterSendEvent",t,e)),null)}sendSession(t){const e=(0,p.L)(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const n=`${t}:${e}`;d.T&&r.vF.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(t){d.T&&r.vF.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const e=(0,v.Z)(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}on(t,e){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(e)}emit(t,...e){this._hooks[t]&&this._hooks[t].forEach((t=>t(...e)))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=(0,g.P$)(this,t),(0,g.lc)(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,e){let n=!1,s=!1;const r=e.exception&&e.exception.values;if(r){s=!0;for(const t of r){const e=t.mechanism;if(e&&!1===e.handled){n=!0;break}}}const o="ok"===t.status,i=undefined;(o&&0===t.errors||o&&n)&&((0,f.qO)(t,{...n&&{status:"crashed"},errors:t.errors||Number(s||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new a.T2((e=>{let n=0;const s=1,r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),e(!0)):(n+=1,t&&n>=t&&(clearInterval(r),e(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,s=(0,_.rm)()){const r=this.getOptions(),o=Object.keys(this._integrations);return!e.integrations&&o.length>0&&(e.integrations=o),this.emit("preprocessEvent",t,e),(0,E.mG)(r,t,e,n,this,s).then((t=>{if(null===t)return t;const e={...s.getPropagationContext(),...n?n.getPropagationContext():void 0},r=undefined;if(!(t.contexts&&t.contexts.trace)&&e){const{traceId:s,spanId:r,parentSpanId:o,dsc:i}=e;t.contexts={trace:{trace_id:s,span_id:r,parent_span_id:o},...t.contexts};const a=i||(0,m.l)(s,this,n);t.sdkProcessingMetadata={dynamicSamplingContext:a,...t.sdkProcessingMetadata}}return t}))}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then((t=>t.event_id),(t=>{if(d.T){const e=t;"log"===e.logLevel?r.vF.log(e.message):r.vF.warn(e)}}))}_processEvent(t,e,n){const s=this.getOptions(),{sampleRate:r}=s,o=S(t),i=I(t),c=t.type||"error",u=`before send for type \`${c}\``;if(i&&"number"==typeof r&&Math.random()>r)return this.recordDroppedEvent("sample_rate","error",t),(0,a.xg)(new h.U(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"));const d="replay_event"===c?"replay":c,p=undefined,l=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,e,n,l).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",d,t),new h.U("An event processor returned `null`, will not send event.","log");const r=undefined;if(e.data&&!0===e.data.__sentry__)return n;const o=undefined;return w(y(s,n,e),u)})).then((s=>{if(null===s)throw this.recordDroppedEvent("before_send",d,t),new h.U(`${u} returned \`null\`, will not send event.`,"log");const r=n&&n.getSession();!o&&r&&this._updateSessionFromEvent(r,s);const i=s.transaction_info;if(o&&i&&s.transaction!==t.transaction){const t="custom";s.transaction_info={...i,source:t}}return this.sendEvent(s,e),s})).then(null,(t=>{if(t instanceof h.U)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new h.U(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t){this._numProcessing++,t.then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t)))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,(t=>{d.T&&r.vF.error("Error while sending event:",t)}));d.T&&r.vF.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map((e=>{const[n,s]=e.split(":");return{reason:n,category:s,quantity:t[e]}}))}}function w(t,e){const n=`${e} must return \`null\` or a valid event.`;if((0,i.Qg)(t))return t.then((t=>{if(!(0,i.Qd)(t)&&null!==t)throw new h.U(n);return t}),(t=>{throw new h.U(`${e} rejected with ${t}`)}));if(!(0,i.Qd)(t)&&null!==t)throw new h.U(n);return t}function y(t,e,n){const{beforeSend:s,beforeSendTransaction:r}=t;return I(e)&&s?s(e,n):S(e)&&r?r(e,n):e}function I(t){return void 0===t.type}function S(t){return"transaction"===t.type}function k(t){const e=(0,l.KU)();e&&e.addEventProcessor&&e.addEventProcessor(t)}},92967:function(t,e,n){n.d(e,{U:function(){return s}});const s="production"},292220:function(t,e,n){n.d(e,{T:function(){return s}});const s="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__}}]);