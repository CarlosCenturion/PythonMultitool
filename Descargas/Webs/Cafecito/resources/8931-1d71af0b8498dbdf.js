(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8931],{78931:function(e,i,n){"use strict";n.d(i,{Z:function(){return L}});var s=n(52676),a=n(75271),o=n(45947),r=n.n(o),c=n(53034),l=n(55998),t=n.n(l),d=n(9532),h=n(29634),u=n(82187),p=n.n(u),x=n(42051),_=n(80445),j=n(24358),m=n(65828),f=n(973),g=n(60136),v=n(9991),N=(e,i)=>{if(e&&(!1!==e.active||!1===e.active&&i.route.includes("/my_account"))){var n,s;if("/adult"!==i.route&&void 0===e.nsfw)return i.push("/adult");if("/choose_categories"!==i.route&&void 0!==e.nsfw&&(void 0===(null==e?void 0:e.categories)||(null==e?void 0:null===(n=e.categories)||void 0===n?void 0:n.length)===0))return i.push("/choose_categories");if("/create_username"!==i.route&&void 0!==e.nsfw&&(null==e?void 0:null===(s=e.categories)||void 0===s?void 0:s.length)>0&&!e.username)return i.push("/create_username")}},C=n(92148),w=n(99058),k=n.n(w),b=n(36705);C.Z.addLocale(b.Z);let y=new C.Z("es-AR");var M=e=>{let{props:i,setOpenNotifications:n}=e,a=async e=>{n(!1),d.Z.post("".concat("https://cafecito.app/api","/user/notification_read"),{id:e},{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})};return(0,s.jsx)("li",{className:p()(k().notification,!i.read&&k().unread),children:(0,s.jsxs)(r(),{href:i.link,onClick:()=>{a(i._id)},children:[(0,s.jsx)("div",{className:k().image,children:(0,s.jsx)("img",{src:i.image,alt:""})}),(0,s.jsxs)("div",{className:k().info,children:[(0,s.jsx)("p",{className:k().title,children:i.title}),(0,s.jsx)("p",{className:k().description,children:i.description}),(0,s.jsx)("span",{className:k().date,children:y.format(new Date(i.createdAt))})]})]})})};let G=e=>{let{linkLogo:i}=e;return(0,s.jsxs)(r(),{href:i,"aria-label":"Ir al inicio",className:t().logo,onClick:e=>{"#"===i&&e.preventDefault()},children:[(0,s.jsx)("img",{className:t().logoMobile,src:"https://cdn.cafecito.app/imgs/cafecito_logo.svg",width:"36px",height:"32px",alt:""}),(0,s.jsx)("img",{className:t().logoDesktop,src:"https://cdn.cafecito.app/imgs/cafecito_logo.svg",width:"43px",height:"38px",alt:""}),(0,s.jsx)("span",{children:"Cafecito"})]})},I=e=>{let{setOpenMenu:i,openMenu:n,setOpenNotifications:a,urlPhoto:o,user:c,countNotifications:l}=e;return(0,s.jsx)("div",{className:t().wrapperMenu,children:(null==c?void 0:c._id)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ul",{children:(0,s.jsx)("li",{className:t().explore,children:(0,s.jsx)(r(),{href:"/explore",children:"Explorar"})})}),(null==c?void 0:c.username)&&(0,s.jsxs)("div",{className:t().wrapperNotificationIcon,children:[(0,s.jsx)(v.G,{icon:g.qmU,width:24,className:t().notificationIcon,onClick:()=>{a(!0)}}),l>0&&(0,s.jsx)("span",{children:l})]}),(0,s.jsxs)("div",{className:t().wrapperMenuIcon,onClick:()=>{i(!n)},children:[(null==c?void 0:c._id)&&o&&(0,s.jsx)("img",{src:o,className:t().imgProfile,alt:""}),(0,s.jsx)(v.G,{icon:m.xiG,width:24})]})]}):(0,s.jsxs)("div",{className:t().withoutLogged,children:[(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:t().explore,children:(0,s.jsx)(r(),{href:"/explore",children:"Explorar"})}),(0,s.jsx)("li",{className:t().register,children:(0,s.jsx)(r(),{href:"/login",children:"Ingresar"})})]}),(0,s.jsx)("div",{className:t().wrapperMenuIcon,onClick:()=>{i(!n)},children:(0,s.jsx)(v.G,{icon:m.xiG,width:24})})]})})},E=e=>{let{setOpenMenu:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{children:(0,s.jsxs)(r(),{href:"/explore",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.Y$T,width:24}),"Explorar"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)(r(),{href:"/login",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.BEY,width:24}),"Ingresar"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)(r(),{href:"/register",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.FKd,width:24}),"Crear cuenta"]})})]})},F=e=>{let{props:{setOpenMenu:i,user:n,logout:a}}=e,o=(0,c.useRouter)();return(0,s.jsx)(s.Fragment,{children:!1===n.active?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{children:(0,s.jsxs)(r(),{href:"/adult",onClick:()=>{i(!1)},children:[(0,s.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_settings.svg",width:"24px",height:"24px",alt:""}),"Configurar cuenta"]})}),(0,s.jsx)("li",{className:"/explore/[[...categoryId]]"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/explore",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.Y$T,width:24}),"Explorar"]})}),(0,s.jsx)("li",{className:"/dashboard/subscribers"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/dashboard/subscribers",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.FVb,width:24}),"Suscripciones"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"#",onClick:()=>{a(),i(!1)},children:[(0,s.jsx)(v.G,{icon:m.mXR,width:24}),"Cerrar sesi\xf3n"]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{className:"/dashboard"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/".concat(n.username?"dashboard":"create_username"),onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.wp6,width:24}),"Panel de control"]})}),(0,s.jsx)("li",{className:"/[username]/[[...coffeeId]]"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/".concat(n.username?n.username:"create_username"),onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.ILF,width:24}),"Perfil"]})}),(0,s.jsx)("li",{className:"/my_account"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/my_account",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.IwR,width:24}),"Editar perfil"]})}),(0,s.jsx)("li",{className:"/explore/[[...categoryId]]"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/explore",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.Y$T,width:24}),"Explorar"]})}),(0,s.jsx)("div",{className:t().nameCategoryMenu,children:"Monetizaci\xf3n"}),(0,s.jsx)("li",{className:"/dashboard/coffees"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/dashboard/coffees",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.Zrf,width:24}),"Cafecitos"]})}),(0,s.jsx)("li",{className:"/dashboard/subscribers"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/dashboard/subscribers",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.FVb,width:24}),"Suscripciones"]})}),(0,s.jsx)("div",{className:t().nameCategoryMenu,children:"Herramientas"}),(0,s.jsx)("li",{className:"/dashboard/giveaways"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/dashboard/giveaways",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.Cly,width:24}),"Sorteos"]})}),(0,s.jsx)("div",{className:t().nameCategoryMenu,children:"Configuraci\xf3n"}),(0,s.jsx)("li",{className:"/my_account/payment"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/my_account/payment",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.aLp,width:24}),"Pagos"]})}),(0,s.jsx)("li",{className:"/my_account/buttons"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/my_account/buttons",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:m.dT$,width:24}),"Botones"]})}),(0,s.jsx)("li",{className:"/my_account/stream"==o.route?t().selected:null,children:(0,s.jsxs)(r(),{href:"/my_account/stream",onClick:()=>{i(!1)},children:[(0,s.jsx)(v.G,{icon:f.z0T,width:24}),"Streams"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"#",onClick:()=>{a(),i(!1)},children:[(0,s.jsx)(v.G,{icon:m.mXR,width:24}),"Cerrar sesi\xf3n"]})})]})})},Z=e=>{let{props:{setOpenMenu:i,openMenu:n,user:a,logout:o}}=e;return(0,s.jsxs)("nav",{className:p()(t().navMobile,n&&t().openMenu),children:[(0,s.jsx)(v.G,{icon:m.g82,onClick:()=>{i(!1)},className:t().closeMenu}),(0,s.jsx)("ul",{children:(null==a?void 0:a._id)?(0,s.jsx)(F,{props:{setOpenMenu:i,user:a,logout:o}}):(0,s.jsx)(E,{setOpenMenu:i})})]})},D=e=>{let{props:{setOpenNotifications:i,openNotifications:n,notifications:a}}=e;return(0,s.jsxs)("nav",{className:p()(t().navMobile,t().navNotifications,n&&t().openNotifications),children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("h2",{children:"Notificaciones"}),(0,s.jsx)(v.G,{icon:m.g82,onClick:()=>{i(!1)},className:t().closeMenu})]}),(0,s.jsx)("ul",{children:null==a?void 0:a.map((e,n)=>(0,s.jsx)(M,{props:e,setOpenNotifications:i},n))})]})};var L=(0,x.$j)(e=>{let{user:i}=e;return{user:i}},e=>({logoutUser:(0,j.DE)(_.TX,e),setUser:(0,j.DE)(_.av,e)}))(e=>{var i,n;let{user:o,logoutUser:r,setUser:l}=e,u=(0,c.useRouter)(),[p,x]=(0,a.useState)(!1),[_,j]=(0,a.useState)(!1),[m,f]=(0,a.useState)([]),[g,v]=(0,a.useState)(0);(0,a.useEffect)(()=>{(async()=>{var e,i;let n=await d.Z.get("".concat("https://cafecito.app/api","/user/check_user_login"),{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});N(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.user,u),l(null==n?void 0:null===(i=n.data)||void 0===i?void 0:i.user)})()},[]),(0,a.useEffect)(()=>{let e=async()=>{var e,i;let n=await d.Z.get("".concat("https://cafecito.app/api","/user/notifications"),{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});f(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.notifications),v(null==n?void 0:null===(i=n.data)||void 0===i?void 0:i.count)};(null==o?void 0:o._id)&&e()},[o]);let C=async()=>{d.Z.get("".concat("https://cafecito.app/api","/auth/logout"),{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),h.Z.remove("session"),r(),u.push("/")},w="/";!Object.keys(o).length||(null==o?void 0:o.username)||(w="#");let k=null==o?void 0:null===(i=o.image)||void 0===i?void 0:i.profile;return!k||k.includes("http:")||k.includes("https:")?k||(k="https://cdn.cafecito.app/imgs/circle-logo.png"):k="".concat("https://cafecito.app","/images_profile/").concat(null==o?void 0:null===(n=o.image)||void 0===n?void 0:n.profile),(0,s.jsx)("header",{className:t().headerContainer,children:(0,s.jsxs)("div",{className:t().headerContainerInside,children:[(0,s.jsx)(G,{linkLogo:w}),(0,s.jsx)(I,{setOpenMenu:x,openMenu:p,setOpenNotifications:j,urlPhoto:k,user:o,countNotifications:g}),(0,s.jsx)(Z,{props:{setOpenMenu:x,openMenu:p,user:o,logout:C}}),(0,s.jsx)(D,{props:{setOpenNotifications:j,openNotifications:_,notifications:m}})]})})})},55998:function(e){e.exports={headerContainer:"header_headerContainer__FazBG",headerContainerInside:"header_headerContainerInside__MynWO",logo:"header_logo__AqbZa",logoDesktop:"header_logoDesktop__WqZ_0",wrapperMenu:"header_wrapperMenu__2b1vU",wrapperNotificationIcon:"header_wrapperNotificationIcon__2Fsxa",withoutLogged:"header_withoutLogged__KWKEQ",notificationIcon:"header_notificationIcon__VFzkj",wrapperMenuIcon:"header_wrapperMenuIcon__rcWIl",imgProfile:"header_imgProfile__RNzVp",navMobile:"header_navMobile__f0q9y",closeMenu:"header_closeMenu__5upG9",selected:"header_selected__crZqb",nameCategoryMenu:"header_nameCategoryMenu__N4fpo",openMenu:"header_openMenu__UL1kv",navNotifications:"header_navNotifications__B2tDD",openNotifications:"header_openNotifications__cw3Kn",navDesktop:"header_navDesktop__lRLzP",logoMobile:"header_logoMobile__0E_c2",menuIcon:"header_menuIcon__LyiKk",menu:"header_menu__g3F7O",menuHeader:"header_menuHeader__jSdlq",register:"header_register__uTFRS",explore:"header_explore___PDIR"}},99058:function(e){e.exports={notification:"notification_notification__xf7JD",image:"notification_image__AmZyA",info:"notification_info__03Gvl",title:"notification_title__IOaNz",description:"notification_description__LgksG",date:"notification_date__HWCah",unread:"notification_unread__yhK0X"}}}]);